<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.paypal.com/sdk/js?client-id=sb&currency=USD"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'brand-black': '#000000',
            'brand-gold': '#CD7F32',
            'brand-dark-gray': '#3A3B3C',
            'brand-light-gold': '#D4AF37',
            'brand-white': '#FFFFFF',
            'brand-beige': '#F5F5DC',
            'brand-bronze': '#8B7355'
          }
        }
      }
    }
  </script>
  <style>
    body {
      transition: background-color 0.3s, color 0.3s;
    }
    .dark-mode {
      background-color: #000000;
      color: #FFFFFF;
    }
  </style>
</head>
<body class="bg-brand-beige text-brand-dark-gray">
<header class="bg-brand-black text-brand-white p-4 flex justify-between items-center">
  <a href="index.html" class="text-2xl font-bold text-brand-light-gold">F1 Shop</a>
  <nav>
    <a href="cart.html" class="hover:text-brand-gold mr-4">Back to Cart</a>
    <button id="darkModeToggle" class="hover:text-brand-gold">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
      </svg>
    </button>
  </nav>
</header>

<div class="container mx-auto mt-8 p-4">
  <h1 class="text-3xl font-bold mb-6 text-brand-light-gold">Checkout</h1>

  <div class="grid md:grid-cols-2 gap-8">
    <!-- Order Summary -->
    <div>
      <div class="bg-brand-dark-gray p-6 rounded-lg mb-6">
        <h2 class="text-brand-white text-xl font-bold mb-4">Order Summary</h2>
        <div id="checkoutItems" class="space-y-4">
          <!-- Checkout items will be dynamically inserted here -->
        </div>
        <div class="border-t border-brand-bronze mt-4 pt-4">
          <div class="flex justify-between">
            <span class="text-brand-white">Total</span>
            <span id="checkoutTotal" class="text-brand-gold font-bold">$0.00</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Checkout Form -->
    <div>
      <div class="bg-brand-white p-6 rounded-lg">
        <h2 class="text-brand-dark-gray text-xl font-bold mb-4">Shipping Information</h2>
        <form id="checkoutForm" class="space-y-4">
          <div>
            <label class="block text-brand-dark-gray mb-2">Full Name</label>
            <input
                    type="text"
                    required
                    class="w-full p-2 border border-brand-bronze rounded"
                    placeholder="Enter your full name"
            >
          </div>
          <div>
            <label class="block text-brand-dark-gray mb-2">Email Address</label>
            <input
                    type="email"
                    required
                    class="w-full p-2 border border-brand-bronze rounded"
                    placeholder="Enter your email"
            >
          </div>
          <div>
            <label class="block text-brand-dark-gray mb-2">Shipping Address</label>
            <input
                    type="text"
                    required
                    class="w-full p-2 border border-brand-bronze rounded"
                    placeholder="Street Address"
            >
          </div>
          <div class="grid grid-cols-3 gap-4">
            <div>
              <label class="block text-brand-dark-gray mb-2">City</label>
              <input
                      type="text"
                      required
                      class="w-full p-2 border border-brand-bronze rounded"
                      placeholder="City"
              >
            </div>
            <div>
              <label class="block text-brand-dark-gray mb-2">State</label>
              <input
                      type="text"
                      required
                      class="w-full p-2 border border-brand-bronze rounded"
                      placeholder="State"
              >
            </div>
            <div>
              <label class="block text-brand-dark-gray mb-2">Zip</label>
              <input
                      type="text"
                      required
                      class="w-full p-2 border border-brand-bronze rounded"
                      placeholder="Zip"
              >
            </div>
          </div>
        </form>

        <div id="paypal-button-container" class="mt-6"></div>
      </div>
    </div>
  </div>
</div>

<script>
  // Dark Mode Toggle
  const darkModeToggle = document.getElementById('darkModeToggle');
  const body = document.body;

  // Check initial dark mode state
  if (localStorage.getItem('darkMode') === 'true') {
    body.classList.add('dark-mode');
  }

  darkModeToggle.addEventListener('click', () => {
    body.classList.toggle('dark-mode');
    localStorage.setItem('darkMode', body.classList.contains('dark-mode'));
  });

  // Checkout Process
  const checkoutItemsContainer = document.getElementById('checkoutItems');
  const checkoutTotalElement = document.getElementById('checkoutTotal');
  const paypalButtonContainer = document.getElementById('paypal-button-container');

  function renderCheckoutSummary() {
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');

    // Clear previous items
    checkoutItemsContainer.innerHTML = '';

    // Render checkout items
    let total = 0;
    cart.forEach(item => {
      const itemTotal = item.price * item.quantity;
      total += itemTotal;

      const checkoutItemElement = document.createElement('div');
      checkoutItemElement.className = 'flex justify-between text-brand-white';
      checkoutItemElement.innerHTML = `
                    <span>${item.name} Ã— ${item.quantity}</span>
                    <span>$${itemTotal.toFixed(2)}</span>
                `;

      checkoutItemsContainer.appendChild(checkoutItemElement);
    });

    // Update total
    checkoutTotalElement.textContent = `$${total.toFixed(2)}`;

    // Setup PayPal buttons
    paypal.Buttons({
      createOrder: function(data, actions) {
        return actions.order.create({
          purchase_units: [{
            amount: {
              value: total.toFixed(2)
            }
          }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
          alert('Transaction completed by ' + details.payer.name.given_name);
          localStorage.removeItem('cart');
          window.location.href = 'index.html';
        });
      }
    }).render('#paypal-button-container');
  }

  // Initial render
  renderCheckoutSummary();
</script>
</body>
</html>